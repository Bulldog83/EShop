<!DOCTYPE html>
<html ng-app="eshop" lang="en">
<head>
	<meta charset="UTF-8">
	<title>E-Stationery: Cart</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js"></script>
	<script src="/js/global.js"></script>
	<script src="/js/cart.js"></script>
</head>
<body ng-controller="cartController">
	<div class="container">
		<ng-include src="'/fragments/navigation.html'"></ng-include>
		<h3>Cart</h3>
		<div ng-show="!cart.empty" aria-label="Cart">
			<table class="table" ng-show="!cart.empty">
				<thead class="table-secondary">
				<tr>
					<th scope="col">#</th>
					<th scope="col">Title</th>
					<th scope="col">Count</th>
					<th scope="col">Price</th>
					<th scope="col">Sum</th>
					<th scope="col">&nbsp;</th>
				</tr>
				</thead>
				<tbody>
				<tr ng-repeat="item in cart.items">
					<th scope="row">{{$index + 1}}</th>
					<td>{{item.title}}</td>
					<td>
						<span>{{item.count}}</span>
						<span class="btn-group btn-group-sm">
							<button type="button" class="btn btn-outline-primary btn-sm" style="line-height: 1; padding: .25rem;" ng-click="addToCart(item.id)">
								<i class="bi bi-plus-circle-fill"></i>
							</button>
							<button type="button" class="btn btn-outline-primary btn-sm" style="line-height: 1; padding: .25rem;" ng-click="removeFromCart(item.id)">
								<i class="bi bi-dash-circle-fill"></i>
							</button>
						</span>
					</td>
					<td>{{item.price}}</td>
					<td>{{item.sum}}</td>
					<td>
						<button type="button" class="btn btn-outline-danger" ng-click="deleteFromCart(item.id)" title="Remove from cart">
							<i class="bi bi-x-square-fill"></i>
						</button>
					</td>
				</tr>
				</tbody>
				<tfoot>
				<tr class="table-primary">
					<th scope="row" colspan="4">TOTAL:</th>
					<td>{{cart.sumTotal}}</td>
					<td>&nbsp;</td>
				</tr>
				</tfoot>
			</table>
			<div class="d-flex flex-row-reverse">
				<div class="p-2">
					<a class="btn btn-primary" href="/orders/new" title="Create Order">Order</a>
				</div>
			</div>
		</div>
		<div ng-show="cart.empty">
			<p>Корзина пуста.</p>
		</div>
	</div>
</body>
</html>