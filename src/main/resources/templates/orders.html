<!DOCTYPE html>
<html ng-app="eshop" lang="en">
<head>
	<meta charset="UTF-8">
	<title>E-Stationery: Orders</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ngStorage/0.3.11/ngStorage.min.js"></script>
	<script src="/js/global.js"></script>
	<script src="/js/orders.js"></script>
</head>
<body ng-controller="ordersController">
<div class="container">
	<ng-include src="'/fragments/navigation.html'"></ng-include>
	<h3>Orders</h3>
	<table class="table" ng-show="orders">
		<thead>
			<tr>
				<th>ID</th>
				<th>Items</th>
				<th>Sum</th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="order in orders">
				<td>{{order.id}}</td>
				<td>
					<table>
						<tbody>
							<tr ng-repeat="item in order.items">
								<td class="p-0 px-3 border-0">{{item.title}}</td>
								<td class="p-0 px-3 border-0">{{item.count}}</td>
								<td class="p-0 px-3 border-0">{{item.sum}}</td>
							</tr>
						</tbody>
					</table>
				</td>
				<td>{{order.sumTotal}}</td>
			</tr>
		</tbody>
	</table>
	<p ng-show="isAuthenticated() && (!orders || orders.empty)">Заказы отсутствуют.</p>
	<p ng-show="!isAuthenticated()">Для просмотра заказов необходимо авторизоваться.</p>
</div>
</body>
</html>